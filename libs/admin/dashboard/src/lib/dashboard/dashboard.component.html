<div id="dashboard">
  <h2 id="page-heading">Community Members</h2>

  <div id="page-loader" *ngIf="isLoading || !members">
    <p>Please wait ...</p>
    <div>
      <mat-progress-spinner mode="indeterminate"></mat-progress-spinner>
    </div>
  </div>

  <div *ngIf="!isLoading && members">
    <div id="accordion-buttons">
      <button
        id="expand-all-button"
        mat-stroked-button
        (click)="accordion.openAll()"
      >
        Expand All
      </button>
      <button mat-stroked-button (click)="accordion.closeAll()">
        Collapse All
      </button>
    </div>

    <mat-paginator
      class="mat-elevation-z1"
      [hidePageSize]="true"
      [length]="noOfMembers"
      (page)="changePage($event)"
      [pageIndex]="currentPage"
      [pageSize]="membersPerPage"
    >
    </mat-paginator>

    <mat-accordion multi>
      <mat-expansion-panel *ngFor="let member of members" [expanded]="true">
        <mat-expansion-panel-header>
          <mat-panel-title> {{ member.authInfo.displayName }} </mat-panel-title>
        </mat-expansion-panel-header>

        <div class="info-container">
          <p>
            <span class="info-label">Email:</span> {{ member.authInfo.email }}
          </p>
          <p>
            <span class="info-label">Phone:</span>
            {{ member.authInfo.phoneNumber }}
          </p>
          <p class="more-button-container">
            <a
              mat-stroked-button
              color="primary"
              [routerLink]="['/member', member.authInfo.uid]"
              >MORE</a
            >
          </p>
        </div>
      </mat-expansion-panel>
    </mat-accordion>
  </div>
</div>
